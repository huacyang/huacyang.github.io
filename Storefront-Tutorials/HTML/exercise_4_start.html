<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<!-- Load the mock version of the StoreAPI; this js file should not included when testing on device -->
<script type="text/javascript" src="excercise_4/jquery/jquery-1.7.1.js"></script>
<script type="text/javascript" src="excercise_4/storeAPI/storeAPI.js"></script>
<script type="text/javascript">
$(document).ready(function() {
	
	var init = function() {
		//remove comment 
		adobe.dps.store.getFolioData(showFolios);
	}

    var showFolios = function(foliodata) {
	
		for(folio_index in foliodata) {
			folio = foliodata[folio_index]
	
			
			addFolio(folio, $('#folios'));
			
		}	
		
		for(folio_index in foliodata) {
			
			folio = foliodata[folio_index]	
		}	
		
		loadCoverImages(foliodata);

    }
	
	var addFolio = function(folio, element) {
		
			folioID = "folio-"+folio.id;
			
			folioHTML = $('<a>');
			//folioHTML.attr('id', folioID);
			folioHTML.attr('href', "#");
			
			$('#folios').append(folioHTML);
			
			folioHTML.append(folio.title);
			folioHTML.append(" / ");
			folioHTML.append(folio.productId);
			
			folioHTML.click(function(e) {
				adobe.dps.store.viewFolio(folio.productId);
			});
			
			folioDiv = $('<div>');
			folioDiv.attr('id',folioID);
			folioDiv.append(folioHTML);
			element.append(folioDiv);
		
	}
	
	var loadCoverImages = function(foliodata) {
		for(folio_index in foliodata) {
			folio = foliodata[folio_index]
		
			addCoverImage(folio);
		}	
	}
	
	var addCoverImage = function (folio) {
		folioID = "folio-"+folio.id;
		folioElement = $('#'+folioID);
		
		// IMPLEMENT HERE
	}
		
	// alternative suggestion - be aware for testing on Android
	// var testondesktop = (navigator.userAgent.toLowerCase().indexOf("ipad") == -1);
	var testondesktop = true;
	
	if(testondesktop) {
		init();
    } else {
        window.onadobedpscontextloaded = init; 
    }
	
});
</script>

<title>Sample store - exercise 4</title>
</head>

<body>
<div id="folios"></div>
</body>
</html>
